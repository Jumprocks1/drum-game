{
    "$schema": "https://json-schema.org/draft-07/schema",
    "title": "Beatmap definition",
    "description": "A definition for a DrumGame beatmap",
    "required": [
        "offset"
    ],
    "type": "object",
    "properties": {
        "schemaVersion": {
            "enum": [
                "0.0.1"
            ]
        },
        "notes": {
            "type": "array",
            "items": {
                "type": "object",
                "required": [
                    "channel",
                    "time"
                ],
                "properties": {
                    "additionalProperties": false,
                    "time": {
                        "type": [
                            "number",
                            "array"
                        ],
                        "items": {
                            "type": "number"
                        },
                        "uniqueItems": true
                    },
                    "duration": {
                        "type": "number"
                    },
                    "modifier": {
                        "enum": [
                            "accent",
                            "ghost"
                        ]
                    },
                    "sticking": {
                        "enum": [
                            "left",
                            "right"
                        ]
                    },
                    "channel": {
                        "enum": [
                            "snare",
                            "bass",
                            "hihat",
                            "crash",
                            "open-hihat",
                            "ride",
                            "sidestick",
                            "high-tom",
                            "mid-tom",
                            "low-tom",
                            "hihat-pedal",
                            "splash",
                            "china",
                            "rim"
                        ]
                    }
                }
            }
        },
        "bpm": {
            "type": [
                "number",
                "array"
            ],
            "items": {
                "type": "object",
                "required": [
                    "time",
                    "bpm"
                ],
                "properties": {
                    "time": {
                        "type": "number"
                    },
                    "bpm": {
                        "type": "number"
                    }
                }
            }
        },
        "measureConfig": {
            "anyOf": [
                {
                    "$ref": "#/$defs/measureConfig"
                },
                {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/measureConfig"
                    }
                }
            ]
        },
        "bookmarks": {
            "type": "array",
            "items": {
                "type": "object",
                "required": [
                    "time"
                ],
                "properties": {
                    "time": {
                        "type": "number"
                    },
                    "title": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    }
                }
            }
        },
        "annotations": {
            "type": [
                "array"
            ],
            "items": {
                "type": "object",
                "required": [
                    "time"
                ],
                "properties": {
                    "time": {
                        "type": "number"
                    },
                    "text": {
                        "type": "string"
                    }
                }
            }
        },
        "audio": {
            "type": "string"
        },
        "video": {
            "type": "string"
        },
        "offset": {
            "type": "number"
        },
        "leadIn": {
            "type": "number"
        },
        "previewTime": {
            "type": "number"
        },
        "id": {
            "type": "string",
            "description": "Unique identifier. Uses filename if not specified. Doesn't need to be in any particular format. By default, this will be generated by DrumGame as a GUID."
        },
        "relativeVolume": {
            "type": "number",
            "minimum": 0,
            "maximum": 1
        },
        "spacingMultiplier": {
            "type": "number",
            "minimum": 0,
            "enum": [
                1,
                2
            ]
        },
        "gameVersion": {
            "type": "number",
            "description": "Intended game version for this beatmap."
        },
        "title": {
            "type": "string"
        },
        "artist": {
            "type": "string"
        },
        "mapper": {
            "type": "string"
        },
        "difficulty": {
            "enum": [
                "Easy",
                "Normal",
                "Insane",
                "Hard",
                "Expert",
                "Expert+"
            ]
        },
        "difficultyName": {
            "type": "string"
        },
        "description": {
            "type": "string"
        },
        "tags": {
            "type": "string"
        },
        "beatmapVersion": {
            "type": "number"
        },
        "audioHash": {
            "type": "string",
            "description": "The MD5 hash of the audio resource. Useful for restoring audio file if it is lost. Indicate other hashing algorithms with the {algorithm}:{hash} format.",
            "pattern": "^([^:]+:[a-fA-F0-9]+|[a-fA-F0-9]{32}|)$"
        },
        "youTubeID": {
            "type": "string",
            "pattern": "^[0-9a-zA-Z_-]{11}$"
        },
        "ototoyAlbumID": {
            "type": "number"
        },
        "amazonASIN": {
            "type": "string",
            "pattern": "^[0-9a-zA-Z]{10}$"
        },
        "bandcampArtist": {
            "type": "string"
        },
        "bandcampTrack": {
            "type": "string"
        },
        "links": {
            "type": "array",
            "description": "Only use for urls/sources that do not have official fields. For example, if you want to link a YouTube video, put that in the `youtubeId` field instead of here.",
            "uniqueItems": true,
            "items": [
                {
                    "type": "object",
                    "required": [
                        "label",
                        "url"
                    ],
                    "properties": {
                        "label": {
                            "type": "string"
                        },
                        "url": {
                            "type": "string"
                        },
                        "description": {
                            "type": "string"
                        }
                    }
                }
            ]
        }
    },
    "additionalProperties": false,
    "$defs": {
        "measureConfig": {
            "type": "object",
            "required": [
                "beats"
            ],
            "properties": {
                "time": {
                    "type": "number"
                },
                "beats": {
                    "type": "number"
                }
            }
        }
    }
}